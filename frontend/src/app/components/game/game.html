<div class="game-room-container">
  <!-- Header -->
  <div class="game-header">
    <div class="header-left">
      <h1>Catte</h1>
      <div class="room-info">
        <span class="info-item"
          >PIN: <strong>{{ gameKey }}</strong></span
        >
        <span class="info-item"
          >Players: <strong>{{ players.length }}/6</strong></span
        >
      </div>
    </div>

    <div class="header-center">
      <div class="game-status" [class]="'status-' + gameState">
        <span class="status-label">{{
          gameState === 'playing' ? 'ğŸ® PLAYING' : 'â³ WAITING'
        }}</span>
      </div>

      <div class="turn-display" *ngIf="gameState === 'playing' && currentTurnPlayerName">
        <span class="turn-label">ğŸ¯ Turn:</span>
        <span class="turn-player">{{ currentTurnPlayerName }}</span>
      </div>
    </div>

    <div class="header-right">
      <button *ngIf="gameState === 'waiting'" (click)="playerReady()" class="btn btn-ready">
        âœ… Ready
      </button>
      <button (click)="leaveGame()" class="btn btn-leave">ğŸšª Leave</button>
    </div>
  </div>

  <!-- Main Game Area -->
  <div class="game-area">
    <!-- Player Circle -->
    <div class="players-circle">
      @for (player of getOrderedPlayers(); track player.id; let i = $index) {
      <app-player-slot
        [player]="player"
        [class.local-player]="player.id === currentPlayerSessionId"
        [isCurrentTurn]="isCurrentTurn(player.id)"
      >
      </app-player-slot>
      }
    </div>

    <!-- Center Area -->
    <!-- <div class="center-area">
      <div class="played-cards">
        <h3>Played Cards</h3>
        <div class="cards-grid">
          <p class="empty-state">No cards played yet</p>
        </div>
      </div> -->

    <!-- <div class="notifications-panel">
        <h3>Game Log</h3>
        <div class="notifications">
          @for (notif of notifications; track notif) {
          <div class="notification">{{ notif }}</div>
          } @empty {
          <div class="empty-state">Waiting for game events...</div>
          }
        </div>
      </div>
    </div> -->

    <!-- My Hand (Bottom of screen) -->
    <app-player-hand [cardIds]="myHand" [isMyHand]="true"></app-player-hand>
  </div>

  <!-- Username Input (if not set) -->
  <div class="username-modal" *ngIf="!usernameSet">
    <div class="modal-content">
      <h2>Enter Your Name</h2>
      <input
        type="text"
        [(ngModel)]="username"
        placeholder="Enter your username"
        class="username-input"
        (keyup.enter)="setUsername()"
        maxlength="20"
        autofocus
      />
      <button (click)="setUsername()" class="btn btn-primary">Set Name</button>
    </div>
  </div>
</div>
